"use strict";const _=require("lodash"),fs=require("fs-extra"),inquirer=require("inquirer"),log=require("fedtools-logs"),cmd=require("fedtools-commands"),common=require("../../common");module.exports=function(a,b){let c=!0,d=process.env.LOGNAME;return a.auto&&(c=!1),a.debug&&(c=!0),d||(d=cmd.run("whoami",{status:a.debug}).output),_.isString(d)&&fs.existsSync("/usr/local")?void inquirer.prompt([{type:"confirm",name:"goForIt",message:"About to reset ownership for /usr/local... Continue?",default:!0}]).then(function(e){return a.actionsPending++,e.goForIt?void(a.actionsDone++,cmd.sudo(`chown -R ${d} /usr/local`,{name:"Envtools",status:c},function(c){return c&&(c=common.USER_IGNORE,log.error("Something went wrong or you did not grant admin access...")),b(c,a)})):a.auto?b(null,a):b(common.USER_INTERRUPT,a)}):b(null,a)};