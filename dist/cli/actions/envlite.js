'use strict';var path=require('path'),fs=require('fs-extra'),utilities=require('fedtools-utilities'),cmd=require('fedtools-commands'),log=require('fedtools-logs'),common=require('../../common');module.exports=function(a){var b=[],c=a.version.currentVersion,d='envlite-'+c+'.tgz',e=path.basename(d),f=utilities.getTemporaryDir('envlite-'+c),g=path.join(f,'envlite');fs.ensureDirSync(g),fs.copy(common.ENVTOOLS.SHELLDIR,g,function(a){a?log.red(a):(fs.writeFileSync(path.join(g,'version'),common.ENVTOOLS.VERSION),cmd.run('tar czf '+d+' envlite',{status:!1,pwd:f},function(a,c){a?c?log.red(c):log.red(a):fs.copy(path.join(f,d),path.join(process.cwd(),d),function(a){a?log.red(a):(b.push(''),b.push(log.strToColor('yellow','ENVTOOLS LITE\n')),b.push('A compressed file has been created and deposited in the current folder.'),b.push('The file name is '+log.strToColor('yellow',e)),b.push(''),b.push(log.strToColor('yellow','WHAT IS IT?\n')),b.push('It contains a very limited subset of envtools, the bare minimum to at least'),b.push('have a decent prompt, as well as a few core aliases (ll, etc.)'),b.push('It does not have any of envtools node capabilities since the package only'),b.push('contains shell scripts helpers.'),b.push(''),b.push(log.strToColor('yellow','HOW TO USE IT?\n')),b.push('1) copy the generated tar.gz file on the destination machine'),b.push(log.strToColor('blue',' $ scp '+e+' remoteServerName:\n')),b.push('2) login to the remote machine and untar the file'),b.push(log.strToColor('blue',' $ ssh remoteServerName')),b.push(log.strToColor('blue',' $ tar xf '+e+'\n')),b.push('3) Add the following lines to your profile (.bashrc or .bash_profile)'),b.push(log.strToColor('blue',' ENVTOOLS_LITE=1 && source "$HOME/envlite/load.sh"')),b.push(''),log.printMessagesInBox(b,common.LOG_COLORS.DEFAULT_BOX))})}))})};