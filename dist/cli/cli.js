"use strict";const common=require("../common"),util=require("util"),log=require("fedtools-logs"),config=require("fedtools-config"),EnvtoolsBase=require("./base"),EnvtoolsCLI=function(){EnvtoolsBase.call(this)};util.inherits(EnvtoolsCLI,EnvtoolsBase),EnvtoolsCLI.prototype.name="EnvtoolsCLI",EnvtoolsCLI.prototype._initialize=function(){EnvtoolsBase.prototype._initialize.call(this),this.help=require("./help"),this.version=require("./version"),this.config=this.packageJson.config,this.name=this.packageJson.name,this.write=!0,config.init(this.config)},EnvtoolsCLI.prototype._runCommand=function(a,b,c){const d=this;d.help.help?(log.debug("call for help with command: ",b),b?require("./actions/help")(d,b):require("./actions/default")(d,a,c)):"color"===b||"colors"===b||"colour"===b||"colours"===b?require("./actions/colors")(d,a):"md2html"===b?require("./actions/md2html")(d,a):"npmrc"===b||"yarnrc"===b?require("./actions/npmrc")(d,a):"registry"===b?2===a._.length?require("./actions/npmrc")(d,a):require("./actions/registry")(d,a):"smtp"===b||"smtp-server"===b||"smtpserver"===b?require("./actions/smtp-server")(d,a):"info"===b||"system"===b?require("./actions/info")(d,a):"config"===b?require("../bootstrap/plugins/envtools")({version:d.version},function(){}):"notif"===b||"notifier"===b||"alert"===b||"growl"===b?require("./actions/notifier")(d,a):"timer"===b||"t"===b?require("./actions/timer")(d,a):"encrypt"===b||"encipher"===b?(a.encrypt=!0,require("./actions/crypto")(d,a)):"decrypt"===b||"decipher"===b?(a.encrypt=!1,require("./actions/crypto")(d,a)):"http"===b||"web"===b||"wup"===b||"http-server"===b?require("./actions/http-server")(d,a):"update"===b||"check"===b||"up"===b||"upgrade"===b?d.version.printUpgradeIfAny(!0):"auto"===b||"automatic"===b||"boot"===b||"bootstrap"===b||"a"===b?require("./actions/bootstrap")(d,"auto",a,function(a){a||d.version.printUpgradeIfAny()}):"manual"===b||"configure"===b||"setup"===b||"m"===b?require("./actions/bootstrap")(d,"manual",a,function(a){a||d.version.printUpgradeIfAny()}):"extra"===b||"xtra"===b||"e"===b||"x"===b?require("./actions/bootstrap")(d,"extra",a,function(a){a||d.version.printUpgradeIfAny()}):"lite"===b||"envlite"===b||"envtools-lite"===b?require("./actions/envlite")(d,a):"wt"===b?require("./actions/testing-only")(d,a):"sds"===b?require("./actions/sds")(d,a):(log.debug("default case..."),require("./actions/default")(d,a,c))},EnvtoolsCLI.prototype.parseCommandLine=function(){const a=this;let b;const c=require("optimist").usage(`${log.strToColor("yellow","Usage: ")+a.name} [options] command`).alias("v","version").describe("v",a.i18n.t("help.v")).alias("b","boring").describe("b",a.i18n.t("help.b")).alias("d","debug").describe("d",a.i18n.t("help.d")).alias("h","help").describe("h",a.i18n.t("help.h")).boolean(["b","d","V","v","h","n"]),d=c.argv;log.boring=d.boring||!1,a.debug=log.verbose=d.debug||!1,(d.r||d.remote)&&(a.remote=log.remote=!0),!1===d.write&&(a.write=!1),"help"===d._[0]&&d._[1]?(a.help.help=!0,b=d._[1]):b=d._[0],log.debug("program: ",d),log.debug("command: ",b),common.createRuntimeDir(function(){a._runCommand(d,b,c)})},module.exports=function(){return EnvtoolsCLI._instance||new EnvtoolsCLI}();